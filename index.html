<!DOCTYPE html>
<html lang='en'>

<head>
	<!-- to avoid the error related to git-hub publishing (visible when inspecting the page): "Error with Permissions-Policy header: Origin trial controlled feature not enabled: 'interest-cohort'." insert that <meta> -->
	<!-- <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> -->
	<meta charset='UTF-8'>
	<meta http-equiv='X-UA-Compatible' content='IE=edge'>
	<meta name='viewport' content='width=device-width, initial-scale=1.0'>

	<title>Work orders</title>
	<link rel="icon" type="image/x-icon" href="./resources/favicon.png">
	<link rel="stylesheet" href="./style.css">
	<link rel="stylesheet" href="./tooltip.css">

	<script src='https://smtpjs.com/v3/smtp.js'></script>
	<script src='script.js'></script>
	<script>
		function sendEmail() {
			window.print();
			if (counter >= 5) {												// the required amount of fields that a user should fill and save
				Email.send({
					SecureToken: '9410fea9-caec-4800-9d73-faa1c7a96f66',
					To: document.getElementById('clients-email').value,		// in order to send to multiple email addresses, make an array[]
					From: "testing.websoft@gmail.com",
					Subject: document.getElementById('email-subject').value,
					Body: document.getElementById('email-body').innerHTML,
				}).then(
					message => alert("email has been sent"));
			} else { window.alert("Please fill and save the required fields.") };
		};
	</script>
</head>

<body>
	<button id='hide-tooltip-button' class='tooltip no-print' onclick='hideTooltips()' tooltip-text="Hide all tooltips. Reload the page to bring them back.">hide hover tooltips</button>
	<h2 class='side-header tooltip no-print' tooltip-text="That section should be emailed to a client after the editing is done.">EMAIL BODY</h2>

	<!-- EMAIL BODY -->
	<!-- CSS MUST be INLINE, in order to work properly in the email client -->
	<!-- images and links MUST have an EXTERNAL URL, in order to be displayed in the email client -->
	<div id='email-body'>
		<table cellspacing='0' cellpadding='0' style='margin: auto; max-width: 600px; color: #66625A;' align='center'>
			<!-- header/logo -->
			<tr>
				<td style='background-color: #634811; text-align: right; width: 40%;'>
					<a href='https://geomatics-consulting.netlify.app/' target='_blank' style='text-decoration: none !important;'>
						<img class='no-print' src='./resources/logo.gif' style='width: 30px;'>
					</a>
				</td>
				<td style='background-color: #634811; text-align: left; padding: 1rem;'>
					<a href='https://geomatics-consulting.netlify.app/' target='_blank' style='text-decoration: none !important; color: #FCEAC5;'>
						<h3 class='no-print'>GEOMATICS<br>CONSULTING</h3>
					</a>
				</td>
			</tr>

			<tr>
				<td colspan='2' style='background-color: #fdf3de; text-align: center; padding: 1rem;'>
					<!-- heading  -->
					<br>
					<h1 id='header'>ESTIMATE REQUEST FOR:</h1>

					<!-- input 1 (client's name) -->
					<form class='client-form'><label id='client-name'>*client:</label>
						<input id='client-name-input' placeholder="Mr. John Smith">
						<button type='submit' id='client-name-button' class='tooltip' onclick='saveClientName()' tooltip-text="Required! Fill in the client's name and press enter">save</button>
					</form>
					<!-- input 2 (client's company) -->
					<form class='client-form'><label id='client-company'>*company:</label>
						<input id='company-name-input' placeholder="Contractors Ltd.">
						<button type='submit' id='company-name-button' class='tooltip' onclick='saveCompanyName()' tooltip-text="Required! Fill in the client's company name and press enter">save</button>
					</form>
					<!-- input 3 (client's job-site address) -->
					<form class='client-form'><label id='client-address'>*address:</label>
						<input id='client-address-input' placeholder="123 Elm Street, Langley, BC">
						<button type='submit' id='client-address-button' class='tooltip' onclick='saveClientAddress()' tooltip-text="Required! Fill in the job-site address and press enter">save</button>
					</form>
				</td>
			</tr>
			<!-- input 4 (project description) -->
			<tr>
				<td colspan='2' style='background-color: #fdf3de; text-align: center; padding: 1rem;'>
					<h3><span id='project-required-field'>*</span>Project description:</h3>
					<form class='client-form'><label id='client-project'></label>
						<textarea id='client-project-input' placeholder="Example: a topographic plan of the subject site and stake the northern boundary."></textarea>
						<button type='submit' id='client-project-button' class='tooltip' onclick='saveClientProject()' tooltip-text="Required! Describe the work order (what will be done on the site).">save</button>
					</form>
				</td>
			</tr>
			<!-- input 5 (estimate) -->
			<tr>
				<td colspan='2' style='background-color: #FCEAC5; text-align: center; padding: 1rem;'>
					<p>&nbsp</p>
					<h3><span id='estimate-required-field'>*</span>Cost of work:</h3>
					<form class='client-form'><label id='client-estimate'></label>
						<input id='client-estimate-input' placeholder="5000 (numbers only)" required>
						<button type='submit' id='client-estimate-button' class='tooltip' onclick='saveClientEstimate()' tooltip-text="Required! Approximate cost of the job. Type in numbers only.">save</button>
					</form>
					<br>

					<!-- proceed button and text -->
					<div class='no-print'>
						<p style='text-decoration: underline;'>
							<b>IMPORTANT!<br>In order to proceed, please review the cancellation policy, and agree to terms and conditions:</b>
						</p>
						<table class='tooltip' tooltip-text="After clicking that button, a client will be redirected to another page to decide, whether to accept the terms and conditions. If accepted - you will get an automated notification via email." style='border: 1px solid #634811; background: #B3811E; margin: 1rem auto 0 auto; text-align: center; width: 200px; box-shadow: 0.125rem 0.125rem 0.125rem #66625A; height: 50px;'>
							<tr>
								<td>
									<a style='text-decoration: none !important; color: #000000 !important;' href='https://pavel-gs.github.io/quotesHTML/proceed.html'>
										<font color='#FCEAC5'><b>REVIEW AND PROCEED</b></font>
									</a>
								</td>
							</tr>
						</table>
						<p>&nbsp</p>
					</div>
				</td>
			</tr>

			<!-- footer -->
			<tr>
				<td colspan='2' style='background-color: #634811; text-align: center; padding: 1rem;'>
					<a href='https://www.facebook.com/PavelSG' target='_blank' style='text-decoration: none !important;'>
						<img class='no-print' src='./resources/facebook.gif' style='width: 20px; margin: 0.25rem;'>
					</a>
					<a href='https://www.instagram.com/pavel_generalov/' target='_blank' style='text-decoration: none !important;'>
						<img class='no-print' src='./resources/instagram.gif' style='width: 20px; margin: 0.25rem;'>
					</a>
					<a href='https://www.linkedin.com/in/pavel-generalov/' target='_blank' style='text-decoration: none !important;'>
						<img class='no-print' src='./resources/linkedin.gif' style='width: 20px; margin: 0.25rem;'>
					</a>
					<a href='https://www.youtube.com/watch?v=0FvEj4ed4ww&t=3s' target='_blank' style='text-decoration: none !important;'>
						<img class='no-print' src='./resources/youtube.gif' style='width: 20px; margin: 0.25rem;'>
					</a>
				</td>
			</tr>
		</table>
	</div>
	<br>
	<br>

	<!-- for the internal use (not in the email body) -->
	<h2 id='office-side-header' class='side-header tooltip' tooltip-text="That section is for your reference only (except email and subject).">OFFICE SIDE</h2>
	<form>
		<table id='office-form'>
			<tr>
				<td class='table-label-row tooltip' tooltip-text="The email will be sent to this address.">
					<label>Client's
						email</label>
				</td>
				<td><input id='clients-email' value="pavelgen@gmail.com"></td>
			</tr>
			<tr>
				<td class='table-label-row no-print tooltip' tooltip-text="Type in a subject for this email">
					<label>Email
						subject</label>
				</td>
				<td class='no-print'><input id='email-subject' value="Estimate / Work order"></td>
			</tr>
			<tr>
				<td class='table-label-row'><label>Client's phone #</label></td>
				<td><input placeholder="604-123-4567"></td>
			</tr>
			<tr>
				<td class='table-label-row'><label>Legal description</label></td>
				<td><textarea placeholder="Lot #, Block #, plan #"></textarea></td>
			</tr>
			<tr>
				<td class='table-label-row'><label>PID</label></td>
				<td><textarea placeholder="xxx-xxx-xxx"></textarea></td>
			</tr>
			<tr>
				<td class='table-label-row'><label>Zoning</label></td>
				<td><input placeholder="zoning"></td>
			</tr>
			<tr>
				<td class='table-label-row'><label>Sec / Tp / BCGS/ ISA#</label></td>
				<td><input placeholder="DL200A, GP.1, 92G.025, 31"></td>
			</tr>
			<tr>
				<td class='table-label-row'><label>LTO plans</label></td>
				<td><textarea placeholder="EPPxxxxx, LMPxxxxx, ..."></textarea></td>
			</tr>
			<tr>
				<td class='table-label-row'><label>OCM's near</label></td>
				<td><input placeholder="V-1234, V-xxxx, ..."></td>
			</tr>
			<tr>
				<td class='table-label-row'><label>Additional comments</label></td>
				<td><textarea placeholder="comments, if any..."></textarea></td>
			</tr>
			<tr>
				<td class='table-label-row'>
					<button id='date-button' class='no-print' onclick='insertCurrentDate(event)'>insert current</button>
					<label style='display: inline; float: right;'>Date</label>
				</td>
				<td><input id='date-input' placeholder="2069 October 32"></td>
			</tr>
		</table>
	</form>

	<button id='send-button' class='tooltip no-print' onclick='sendEmail()' tooltip-text="If everything was filled correctly, click that button to print the page for your reference, and send the proposal to a client.">
		PRINT AND SEND
	</button>
</body>

</html>